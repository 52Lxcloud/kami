import { faListUl } from '@fortawesome/free-solid-svg-icons'
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { inject, observer } from 'mobx-react'
import Link from 'next/link'
import React from 'react'
import AppStore from 'store/app'
import SocialStore from 'store/social'
import { MenuModel, Stores } from 'store/types'
import UserStore from 'store/user'
import PageStore from '../../store/pages'

interface Store {
  app?: AppStore
  master?: UserStore
  links?: SocialStore
  pages?: PageStore
}

@inject((store: Stores) => ({
  app: store.appStore,
  master: store.userStore,
  links: store.socialStore,
  pages: store.pageStore,
}))
@observer
export default class Header extends React.Component<Store> {
  state = {
    menuOpen: false,
  }

  renderSubMenu(subMenu: MenuModel[]) {
    const menus = subMenu.map((menu) => {
      return (
        <Link href={'[page]'} as={menu.path.replace(/^\//, '')} key={menu._id}>
          <a>
            {menu.icon && <FontAwesomeIcon icon={menu.icon} />}
            <span>{menu.title}</span>
          </a>
        </Link>
      )
    })
    return <div className="sub-menu">{menus}</div>
  }

  render() {
    const app = this.props.app
    const { menu } = app || {}
    return (
      <header className={this.state.menuOpen ? 'active' : ''}>
        {app?.viewport.mobile && (
          <div
            onClick={() => this.setState({ menuOpen: !this.state.menuOpen })}
            className="head-btn"
            style={{
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              padding: '1em',
              cursor: 'pointer',
            }}
          >
            <FontAwesomeIcon icon={faListUl} />
          </div>
        )}
        <style jsx>{`
          .head-logo {
            background: var(---white);
          }
        `}</style>
        <div className="head-logo">
          <svg viewBox="0 0 200 200">
            <g
              id="Page-1"
              stroke="none"
              strokeWidth="1"
              fill="none"
              fillRule="evenodd"
            >
              <g id="028-snow" fillRule="nonzero">
                <path
                  d="M171.551071,76.9911504 C187.263183,76.9911504 200,63.6538649 200,47.201933 C200,28.2932515 183.344464,14.086705 165.559326,18.0800518 C159.059222,7.22167822 147.530396,0 134.389086,0 C116.988452,0 102.412604,12.6588681 98.5997112,29.6611677 C84.806196,27.5512196 72.5663717,38.7440821 72.5663717,53.1989301 C72.5663717,66.3388057 82.73905,76.9911504 95.2881231,76.9911504 L171.551071,76.9911504 Z"
                  id="Path"
                  fill="#7ACDF9"
                ></path>
                <path
                  d="M135.480783,118.584071 C151.563878,118.584071 164.60177,104.925767 164.60177,88.0778564 C164.60177,68.617369 147.438457,54.1204909 129.244082,58.2806707 C123.620635,39.3825023 106.787357,25.6637168 86.8956094,25.6637168 C73.8694213,25.6637168 62.1547855,31.5468159 54.040872,40.914985 C50.3157045,38.1888004 45.7865186,36.5848018 40.8976507,36.5848018 C24.0983114,36.5848018 13.0913366,54.8221637 19.9849837,70.6431068 C8.70922252,72.1829455 0,82.2764898 0,94.508154 C0,107.804792 10.2895612,118.584071 22.9825947,118.584071 L135.480783,118.584071 L135.480783,118.584071 Z"
                  id="Path"
                  fill="#A2DDFD"
                ></path>
                <path
                  d="M135.480783,118.584071 C151.563878,118.584071 164.60177,104.925767 164.60177,88.0778564 C164.60177,68.617369 147.438457,54.1204909 129.244082,58.2806707 C123.620635,39.3825023 106.787357,25.6637168 86.8956094,25.6637168 C73.8694213,25.6637168 62.1547855,31.5468159 54.040872,40.914985 C50.3157045,38.1888004 45.7865186,36.5848018 40.8976507,36.5848018 C24.0983114,36.5848018 13.0913366,54.8221637 19.9849837,70.6431068 C8.70922252,72.1829455 0,82.2764898 0,94.508154 C0,107.804792 10.2895612,118.584071 22.9825947,118.584071 L135.480783,118.584071 L135.480783,118.584071 Z"
                  id="Path"
                  fill="#A2DDFD"
                ></path>
                <path
                  d="M49.6898474,82.0514736 C27.9958773,73.7074822 35.3956088,42.1272201 49.5116015,38.1432852 C46.8025735,36.9476535 43.8314192,36.2831858 40.7115324,36.2831858 C23.9886441,36.2831858 13.0317601,54.5876298 19.8940354,70.4667667 C8.66958832,72.0122693 0,82.1429405 0,94.4195961 C0,107.765142 10.2427351,118.584071 22.8780048,118.584071 L56.6371681,118.584071 C39.9449583,112.047267 41.2225819,90.2707748 49.6898474,82.0514736 Z"
                  id="Path"
                  fill="#7ACDF9"
                ></path>
                <g id="Group" transform="translate(34.513274, 133.628319)">
                  <g fill="#7ACDF9" id="Path">
                    <path d="M26.58898,11.5323868 C25.8452296,11.5323868 25.1010917,11.2341249 24.5336865,10.6376011 L19.3960338,5.23628955 C18.2608359,4.04283441 18.2608359,2.10779907 19.3960338,0.914751385 C20.5312318,-0.279111224 22.3718106,-0.278703763 23.5070086,0.914343923 L26.5893676,4.15488636 L29.6717266,0.914343923 C30.8069246,-0.279111224 32.6475034,-0.278703763 33.7823138,0.914751385 C34.9175118,2.10820653 34.9175118,4.04324187 33.7823138,5.23628955 L28.6446612,10.6376011 C28.0768684,11.2337175 27.3327304,11.5323868 26.58898,11.5323868 Z"></path>
                    <path d="M3.26180479,23.4078564 C1.97855436,23.4078564 0.803824042,22.5073661 0.45578451,21.1419622 C0.0403074737,19.5113007 0.960790647,17.8358184 2.51146567,17.3990195 L6.72204638,16.2128987 L5.59382469,11.7862354 C5.17834765,10.1559814 6.09883082,8.48009168 7.64950585,8.0432928 C9.19901815,7.60486407 10.7942639,8.57380786 11.209741,10.2040619 L13.0902396,17.5827847 C13.2898392,18.365926 13.1851948,19.2 12.7999483,19.9016489 C12.4143143,20.6037054 11.7794716,21.1154772 11.0349461,21.3253199 L4.01679478,23.3023238 C3.76409793,23.3740371 3.5110135,23.4078564 3.26180479,23.4078564 L3.26180479,23.4078564 Z"></path>
                    <path d="M8.40372069,48.602432 C8.15451198,48.602432 7.90181513,48.5686127 7.64950585,48.4973069 C6.09883082,48.0609155 5.17873522,46.3846183 5.59382469,44.7543643 L6.72204638,40.327701 L2.51146567,39.1415802 C0.960790647,38.7051888 0.0406950455,37.029299 0.45578451,35.3986376 C0.871649118,33.7683835 2.46611976,32.8002547 4.01601964,33.2378685 L11.0341709,35.2148723 C11.7786965,35.4247151 12.4139267,35.9364869 12.7991732,36.6385433 C13.1848072,37.3405997 13.289064,38.1746737 13.0894645,38.9574075 L11.2089658,46.3361304 C10.8613139,47.7019418 9.68697113,48.602432 8.40372069,48.602432 L8.40372069,48.602432 Z"></path>
                    <path d="M31.7266326,56.5223658 C30.9824947,56.5223658 30.2387443,56.224002 29.6713391,55.6274782 L26.58898,52.3869358 L23.506621,55.6274782 C22.371423,56.8205259 20.5308443,56.8209333 19.3956463,55.6270707 C18.2604483,54.4336156 18.2604483,52.4985803 19.3956463,51.3055326 L24.5332989,45.904221 C25.6684969,44.7111734 27.5090756,44.7111734 28.6438861,45.904221 L33.7815387,51.3055326 C34.9167366,52.4989877 34.9167366,54.434023 33.7815387,55.6270707 C33.214521,56.224002 32.4707706,56.5223658 31.7266326,56.5223658 L31.7266326,56.5223658 Z"></path>
                    <path d="M44.7742394,48.602432 C43.490989,48.602432 42.3162586,47.7019418 41.9682191,46.3365378 L40.0877204,38.957815 C39.8881209,38.1746737 39.9927653,37.3405997 40.3780118,36.6389508 C40.7636458,35.9368944 41.3984885,35.4251226 42.143014,35.2152798 L49.1611653,33.2382759 C50.7110652,32.8006621 52.3055358,33.768791 52.7214004,35.399045 C53.1368775,37.0297065 52.2163943,38.7051888 50.6657193,39.1419876 L46.4551386,40.3281085 L47.5833602,44.7547718 C47.9988373,46.3850258 47.0783541,48.0609155 45.5276791,48.4977144 C45.2765325,48.5686127 45.0230605,48.602432 44.7742394,48.602432 Z"></path>
                    <path d="M49.9157677,23.4078564 C49.666559,23.4078564 49.4138622,23.3740371 49.1615529,23.3027313 L42.1434016,21.3257274 C41.398876,21.1158846 40.7636458,20.6037054 40.3783993,19.9020564 C39.9927653,19.2 39.8885085,18.365926 40.088108,17.5831922 L41.9686067,10.2044693 C42.3844713,8.57421532 43.9789419,7.60608646 45.5288418,8.04370026 C47.0795168,8.48009168 48,10.1563889 47.584523,11.7866429 L46.4563013,16.2133062 L50.666882,17.399427 C52.217557,17.8358184 53.1376526,19.5117082 52.7225631,21.1423696 C52.3737485,22.5073661 51.1990182,23.4078564 49.9157677,23.4078564 L49.9157677,23.4078564 Z"></path>
                  </g>
                  <path
                    d="M48.3162586,37.9285669 L39.3362186,32.477545 L39.3362186,24.0634622 L48.3162586,18.6124403 C49.7064789,17.7685873 50.1828047,15.8995607 49.3801434,14.4379958 C48.5774821,12.9760234 46.7989148,12.476068 45.4094697,13.3195136 L36.4305923,18.7697205 L29.4961566,14.5606418 L29.4961566,3.66022792 C29.4961566,1.97211434 28.1946903,0.604265614 26.5893676,0.604265614 C24.984045,0.604265614 23.6825786,1.97211434 23.6825786,3.66022792 L23.6825786,14.5606418 L16.7477553,18.7697205 L7.76849041,13.3195136 C6.37788257,12.476068 4.60009043,12.975616 3.79781668,14.4379958 C2.99515535,15.8995607 3.47148117,17.7685873 4.86170144,18.6124403 L13.8421291,24.0634622 L13.8421291,32.477545 L4.86170144,37.9285669 C3.47148117,38.7724199 2.99515535,40.6414465 3.79781668,42.1030114 C4.60280344,43.5690584 6.38175828,44.0629019 7.76849041,43.2214936 L16.7477553,37.7712867 L23.6825786,41.9803654 L23.6825786,52.8807793 C23.6825786,54.5684854 24.984045,55.9367416 26.5893676,55.9367416 C28.1946903,55.9367416 29.4961566,54.5684854 29.4961566,52.8807793 L29.4961566,41.9803654 L36.4305923,37.7712867 L45.4094697,43.2214936 C46.7934888,44.061272 48.5739939,43.5710957 49.3801434,42.1030114 C50.1828047,40.6414465 49.7064789,38.7724199 48.3162586,37.9285669 Z M33.5222531,32.4791749 L26.58898,36.6874387 L19.655707,32.4791749 L19.655707,24.0622398 L26.58898,19.8539759 L33.5222531,24.0622398 L33.5222531,32.4791749 Z"
                    id="Shape"
                    fill="#A2DDFD"
                  ></path>
                </g>
                <g id="Group" transform="translate(123.893805, 127.433628)">
                  <g fill="#7ACDF9" id="Path">
                    <path d="M41.2774461,53.888904 C39.6508164,53.888904 38.332787,52.5177672 38.332787,50.8255956 L38.332787,43.16855 C38.332787,41.4767869 39.6508164,40.1052417 41.2774461,40.1052417 L48.637916,40.1052417 C50.2645457,40.1052417 51.5825751,41.4767869 51.5825751,43.16855 C51.5825751,44.8607216 50.2645457,46.2318584 48.637916,46.2318584 L44.2221052,46.2318584 L44.2221052,50.8255956 C44.2221052,52.5173587 42.9036832,53.888904 41.2774461,53.888904 Z"></path>
                    <path d="M52.5857223,30.8936692 C52.0863081,30.8936692 51.5794341,30.7613342 51.1161411,30.4827774 L44.7419357,26.6540504 C43.3336034,25.8081688 42.8510719,23.9346494 43.6641905,22.4695711 L47.3446217,15.8385296 C48.1581329,14.3730429 49.9590864,13.8718856 51.3670261,14.7173587 C52.7753583,15.5632403 53.2578898,17.4367597 52.4447713,18.901838 L50.2366696,22.8800545 L54.0608002,25.1771273 C55.4691325,26.0230088 55.951664,27.8965283 55.1385454,29.3616065 C54.5931946,30.3443159 53.6033965,30.8936692 52.5857223,30.8936692 Z"></path>
                    <path d="M32.7308675,13.0358067 C31.7131933,13.0358067 30.7233952,12.4864534 30.1780444,11.503744 L26.4976131,4.87229408 C25.6844946,3.40721579 26.1670261,1.53369639 27.5753583,0.68781484 C28.983298,-0.157658271 30.7850368,0.343498979 31.5977627,1.8089857 L33.8058644,5.78761062 L37.6303876,3.49053778 C39.0383273,2.64506467 40.8400661,3.14622192 41.652792,4.61170865 C42.4659105,6.07678693 41.983379,7.95030633 40.5750467,8.79618788 L34.2004487,12.6249149 C33.7371557,12.9034717 33.2306743,13.0358067 32.7308675,13.0358067 Z"></path>
                    <path d="M14.3039761,18.1711368 L6.94311355,18.1711368 C5.31648386,18.1711368 3.99845444,16.8 3.99845444,15.1078285 C3.99845444,13.4156569 5.31648386,12.0445201 6.94311355,12.0445201 L11.359317,12.0445201 L11.359317,7.4503744 C11.359317,5.75820286 12.6773464,4.38706603 14.3039761,4.38706603 C15.9306058,4.38706603 17.2486352,5.75820286 17.2486352,7.4503744 L17.2486352,15.1078285 C17.2486352,16.8 15.9302131,18.1711368 14.3039761,18.1711368 Z"></path>
                    <path d="M5.68397732,43.9699115 C5.18456313,43.9699115 4.67808176,43.8375766 4.21439611,43.5590197 C2.80606382,42.7131382 2.32353234,40.8396188 3.13665088,39.3745405 L5.34475259,35.3959156 L1.52022934,33.0992512 C0.111897046,32.2537781 -0.370634426,30.3802587 0.442484108,28.914772 C1.25521002,27.4496937 3.05577091,26.9464942 4.46488845,27.7936011 L10.8394865,31.6219197 C11.5159728,32.0279101 12.0094977,32.6973451 12.211305,33.4819605 C12.4135049,34.2669843 12.3078898,35.1030633 11.9172317,35.8063989 L8.23680045,42.4378489 C7.69144958,43.4209666 6.70125888,43.9699115 5.68397732,43.9699115 L5.68397732,43.9699115 Z"></path>
                    <path d="M26.5356974,57.999047 C25.5180232,57.999047 24.5286177,57.4496937 23.9828742,56.4669843 L21.7747725,52.4887679 L17.9506419,54.7858407 C16.5427022,55.6313138 14.7417487,55.1297481 13.9282376,53.6646698 C13.115119,52.1995916 13.5976505,50.3260722 15.0059828,49.4801906 L21.3801882,45.6514636 C22.7877353,44.8063989 24.5890814,45.3071477 25.4025925,46.7726344 L29.0830238,53.403676 C29.8961423,54.8687543 29.4136109,56.7422737 28.0052786,57.5881552 C27.5415929,57.866712 27.0351116,57.999047 26.5356974,57.999047 Z"></path>
                  </g>
                  <path
                    d="M53.5409697,21.9590197 C53.1204724,20.3248468 51.506014,19.3535739 49.9343512,19.7930565 L39.7874486,22.6211028 L34.0547862,16.6574541 L36.7732955,6.10211028 C37.1941855,4.46793737 36.2621027,2.78801906 34.6912252,2.35017018 C33.1203478,1.91150442 31.5054967,2.88196052 31.0846068,4.51613342 L28.3664901,15.0702519 L20.5309485,17.2541865 L13.103733,9.52770592 C11.9533529,8.33179033 10.0891873,8.33179033 8.93880718,9.52770592 C7.78881964,10.7244384 7.78881964,12.6637168 8.93880718,13.8604493 L16.3660227,21.5869299 L14.2666771,29.7377808 L4.12134488,32.5654187 C2.55046741,33.0028591 1.61838464,34.6831858 2.03927459,36.3173587 C2.46094977,37.9552076 4.07972703,38.9211709 5.64589306,38.483322 L15.7927957,35.6552757 L21.5254581,41.6189244 L18.8069488,52.1746767 C18.3860588,53.809258 19.3181416,55.4887679 20.8890191,55.9266167 C22.4567556,56.3648741 24.074355,55.3968686 24.4952449,53.7606535 L27.2133616,43.2061266 L35.0481179,41.022192 L42.4753334,48.7486726 C43.6261062,49.9449966 45.4898791,49.9445882 46.6398666,48.7486726 C47.7898542,47.5519401 47.7898542,45.6126617 46.6398666,44.4163376 L39.2126511,36.689857 L41.3119968,28.5394146 L51.4577216,25.7117767 C53.0297769,25.273111 53.9618597,23.5936011 53.5409697,21.9590197 L53.5409697,21.9590197 Z M22.0558893,23.1724983 L29.8898604,20.9885636 L35.6240932,26.954663 L33.5247476,35.1038802 L25.6911691,37.2878148 L19.9565437,31.3225323 L22.0558893,23.1724983 Z"
                    id="Shape"
                    fill="#A2DDFD"
                  ></path>
                </g>
                <g id="Group" transform="translate(24.778761, 64.601770)">
                  <g transform="translate(0.000000, 7.833870)" id="Path">
                    <path
                      d="M29.0368861,15.978208 C29.04,22.6724558 22.6070442,28.1021521 14.6687434,28.1062775 C6.73044248,28.1103982 0.292424779,22.6872989 0.288919223,15.9934634 C0.28580531,9.29921561 6.71837168,3.869107 14.6570619,3.86498156 C22.5957522,3.86086082 29.0337699,9.28396018 29.0368861,15.978208 L29.0368861,15.978208 Z"
                      fill="#FFFFFF"
                    ></path>
                    <path
                      d="M78.200459,15.9522325 C78.2035752,22.6464803 84.6415929,28.0691673 92.5802832,28.0650466 C100.518584,28.0609212 106.95154,22.6308126 106.948426,15.9369771 C106.94531,9.24272928 100.507292,3.81962993 92.5686018,3.82375067 C84.6299115,3.82787611 78.1973451,9.25798471 78.200459,15.9522325 Z"
                      fill="#FFFFFF"
                    ></path>
                    <path
                      d="M67.7058783,10.4780068 C67.7015929,1.25754224 61.3928496,0.394579646 53.611469,0.39868813 C45.8300885,0.402825825 39.5221239,1.27238536 39.5264049,10.49285 C39.5306903,19.7129023 45.8425487,27.1843524 53.6239292,27.180231 C61.4056991,27.1761062 67.7101593,19.6984714 67.7058783,10.4780068 Z"
                      fill="#4E5660"
                    ></path>
                  </g>
                  <g
                    transform="translate(13.238938, 0.000000)"
                    fill="#4E5660"
                    id="Path"
                  >
                    <path d="M2.95345133,13.7216412 C1.34102655,13.7216412 0.0338761062,12.3383447 0.0330960728,10.6309735 C0.0303716814,4.9312148 4.40739823,0.291914722 9.79019469,0.28902856 L9.79525664,0.28902856 C15.1753274,0.28902856 19.5543009,4.92255632 19.5570269,10.6206657 C19.5578053,12.3284493 18.2510442,13.7138073 16.6382301,13.7146319 C16.6378407,13.7146319 16.6370619,13.7146319 16.6366726,13.7146319 C15.0242478,13.7146319 13.7170973,12.3317478 13.7163186,10.6239642 C13.7151504,8.33523733 11.9563186,6.47407482 9.79486726,6.47407482 C9.7940885,6.47407482 9.79369912,6.47407482 9.79292035,6.47407482 C7.63069027,6.47531175 5.87263717,8.3385358 5.87380531,10.6280873 C5.87458407,12.3362832 4.56782301,13.7212289 2.95500885,13.7220535 C2.95423009,13.7216412 2.95384071,13.7216412 2.95345133,13.7216412 L2.95345133,13.7216412 Z"></path>
                    <path d="M64.1103363,13.6890688 C62.4979115,13.6890688 61.1907611,12.3057723 61.189981,10.598401 C61.1872566,4.8986424 65.5642832,0.259342317 70.9470796,0.256456154 L70.9521416,0.256456154 C73.5578761,0.256456154 76.0078584,1.33010861 77.8515752,3.28032985 C79.6960708,5.2313757 80.7131327,7.82686042 80.7143012,10.5880933 C80.7150796,12.2962892 79.4083186,13.6812349 77.7955044,13.6820595 C77.795115,13.6820595 77.7943363,13.6820595 77.7939469,13.6820595 C76.1815221,13.6820595 74.8743717,12.2987631 74.8735929,10.5913918 C74.8732035,9.48228077 74.4647434,8.43955149 73.7237522,7.65616452 C72.9835398,6.87277755 71.9991858,6.44150241 70.952531,6.44150241 C70.9517522,6.44150241 70.9513628,6.44150241 70.9505841,6.44150241 C68.788354,6.44273934 67.0303009,8.3059634 67.031469,10.5955149 C67.0322478,12.3037108 65.7254867,13.6886565 64.1126726,13.6894811 C64.1115044,13.6890688 64.1107257,13.6890688 64.1103363,13.6890688 L64.1103363,13.6890688 Z"></path>
                  </g>
                </g>
                <path
                  d="M143.58819,42.4778761 C143.365313,42.4778761 143.1386,42.450417 142.91227,42.3930758 C141.367475,42.0009756 140.416507,40.3655421 140.788608,38.7393962 C142.366777,31.8415009 147.417764,26.5245247 153.970582,24.8636511 C155.514226,24.4719546 157.069379,25.4730015 157.441481,27.0991474 C157.813582,28.7252933 156.862614,30.3611307 155.317818,30.7528271 C150.943519,31.8612876 147.436561,35.5533293 146.383169,40.1575795 C146.06554,41.5454771 144.887092,42.4778761 143.58819,42.4778761 Z"
                  id="Path"
                  fill="#A2DDFD"
                ></path>
              </g>
            </g>
          </svg>
        </div>
        <nav className="head-menu">
          {menu?.map((item: MenuModel) => {
            return (
              <div
                className={item.subMenu ? 'has-child' : 'menu-link'}
                key={item._id}
              >
                <Link href={item.path} as={item.path}>
                  <a>
                    {item.icon && <FontAwesomeIcon icon={item.icon} />}
                    <span>{item.title}</span>
                  </a>
                </Link>
                {item.subMenu && this.renderSubMenu(item.subMenu)}
              </div>
            )
          })}
        </nav>
        <nav className="head-social">
          {this.props.links?.socialLinks.map((link) => {
            return (
              <a title={link.title} href={link.url} key={link.url}>
                <FontAwesomeIcon icon={link.icon} />
              </a>
            )
          })}
        </nav>
      </header>
    )
  }
}
